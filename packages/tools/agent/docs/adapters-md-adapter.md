---
type: Documentation
domain: agent
origin: packages/tools/agent/src/adapters/md-adapter.ts
last_modified: 2026-01-31
generated: true
source: packages/tools/agent/src/adapters/md-adapter.ts
generated_at: 2026-01-31T10:17:58.159195
hash: c380558624685ccdabe95319d4d78e9d78ca966fb01ed996dd0900ed50cce976
---

## Markdown Adapter Documentation

This document details the functionality of the Markdown Adapter, a component designed for processing Markdown files within a larger agent system. It handles file parsing, prompt generation, and post-processing of content for improved documentation refinement.

**Overview**

The Markdown Adapter is built to ingest Markdown content, break it into manageable sections, and prepare it for analysis and improvement by a language model. It focuses on preserving the original intent and technical accuracy of the documentation while enhancing its clarity and readability.

**Functionality**

The adapter provides the following core functions:

*   **`canHandle(extension: string): boolean`**:  Determines if the adapter can process a file based on its extension. It returns `true` if the extension is `.md`, and `false` otherwise.

    ```typescript
    canHandle('.md'); // Returns true
    canHandle('.txt'); // Returns false
    ```

*   **`parse(filePath: string, content: string): Promise<string[]>`**: Parses the Markdown content of a file and splits it into chunks. This function aims to create sections suitable for processing by a language model, respecting a target chunk size of approximately 10KB. The parsing logic splits the content at section headers (lines starting with one or more `#` characters).

    *   `filePath`: The path to the Markdown file.
    *   `content`: The string content of the Markdown file.
    *   Returns: A promise that resolves to an array of strings, where each string represents a chunk of the parsed content, including a header indicating the file path.

*   **`generatePrompt(filePath: string, parsedContent: string): string`**: Constructs a prompt for a language model, instructing it to refine and improve the provided documentation. The prompt emphasizes the importance of maintaining technical accuracy, depth, and original intent while enhancing clarity for both technical and non-technical audiences.

    *   `filePath`: The path to the Markdown file.
    *   `parsedContent`: A string representing a chunk of the parsed Markdown content.
    *   Returns: A string containing the prompt for the language model.

*   **`postProcess(filePath: string, outputs: string[]): string`**:  Processes the outputs generated by the language model. Specifically, it combines multiple output strings into a single string and removes any surrounding Markdown code fences (```markdown ... ```).

    *   `filePath`: The path to the Markdown file.
    *   `outputs`: An array of strings representing the outputs from the language model.
    *   Returns: A string containing the combined and cleaned output.

**Workflow**

1.  The adapter receives a file path and content.
2.  `canHandle()` verifies the file type.
3.  `parse()` splits the content into chunks.
4.  `generatePrompt()` creates a prompt for each chunk.
5.  The prompt is sent to a language model.
6.  `postProcess()` combines and cleans the language modelâ€™s responses.

**Considerations**

*   The `targetChunkSize` parameter in the `parse` function controls the maximum size of each chunk. Adjusting this value may be necessary depending on the capabilities of the language model and the complexity of the Markdown content.
*   The prompt generated by `generatePrompt` is designed to guide the language model towards a specific type of documentation improvement. Modifying the prompt can alter the behavior of the language model.
*   The adapter assumes that section headers are indicated by lines starting with one or more `#` characters.