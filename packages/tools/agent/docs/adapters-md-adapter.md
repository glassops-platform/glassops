---
type: Documentation
domain: agent
origin: packages/tools/agent/src/adapters/md-adapter.ts
last_modified: 2026-01-31
generated: true
source: packages/tools/agent/src/adapters/md-adapter.ts
generated_at: 2026-01-31T09:21:11.832950
hash: c380558624685ccdabe95319d4d78e9d78ca966fb01ed996dd0900ed50cce976
---

## Markdown Adapter Documentation

**Overview**

This document details the functionality of the Markdown Adapter, a component designed to process Markdown files for use with a larger agent system. The adapter prepares Markdown content into a format suitable for analysis and refinement by a language model.

**Purpose**

The Markdown Adapter serves as an interface between the agent and Markdown files (.md). It handles parsing, chunking, prompt generation, and post-processing of Markdown content. This allows the agent to effectively work with documentation written in Markdown format.

**Functionality**

The adapter provides the following core functions:

*   **File Type Handling:** The `canHandle` function determines if the adapter should process a file based on its extension. It specifically handles files with the `.md` extension.

*   **Content Parsing:** The `parse` function reads the content of a Markdown file and divides it into smaller chunks. This is necessary because language models have input length limitations. The parsing process:
    *   Identifies sections based on Markdown headers (lines starting with one or more `#`).
    *   Creates chunks of approximately 10KB in size, attempting to keep related sections together.
    *   Prepends each chunk with a header indicating the file path and content type.
    *   Returns an array of strings, where each string represents a chunk of the original Markdown content.

*   **Prompt Generation:** The `generatePrompt` function constructs a prompt for the language model. This prompt instructs the model to act as a principal architect, refining and improving the provided documentation while maintaining its original intent and technical accuracy. The prompt emphasizes the need for a comprehensive, clear, and coherent document suitable for both technical and non-technical audiences.

*   **Post-Processing:** The `postProcess` function cleans up the output generated by the language model. Specifically, it removes any extraneous code fencing (lines starting with ```markdown or ending with ```) that may have been added during the refinement process. It then combines the individual outputs into a single string.

**Usage**

You interact with this adapter through the agent system. The agent will automatically select this adapter when processing `.md` files. You do not need to directly call the adapterâ€™s functions.

**Input**

*   `filePath`: The path to the Markdown file.
*   `content`: The string content of the Markdown file.

**Output**

*   An array of strings representing chunks of the Markdown content, formatted for input to a language model.
*   A refined version of the Markdown content, post-processed to remove unnecessary formatting.