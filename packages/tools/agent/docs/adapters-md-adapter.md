---
type: Documentation
domain: agent
origin: packages/tools/agent/src/adapters/md-adapter.ts
last_modified: 2026-02-01
generated: true
source: packages/tools/agent/src/adapters/md-adapter.ts
generated_at: 2026-02-01T19:48:38.339773
hash: c380558624685ccdabe95319d4d78e9d78ca966fb01ed996dd0900ed50cce976
---

## Markdown Adapter Documentation

This document details the functionality of the Markdown Adapter, a component designed for processing Markdown files within a larger agent system. It handles file parsing, prompt generation, and post-processing of content for improved documentation refinement.

**Overview**

The Markdown Adapter is built to integrate with an agent, enabling the agent to understand and work with Markdown (.md) files. It breaks down large Markdown files into smaller, manageable chunks and prepares them for analysis and improvement by a language model.

**Functionality**

The adapter provides the following core functions:

*   **`canHandle(extension: string): boolean`**:  Determines if the adapter can process a file based on its extension. It returns `true` if the extension is '.md', and `false` otherwise.

*   **`parse(filePath: string, content: string): Promise<string[]>`**: Parses the content of a Markdown file and splits it into chunks.
    *   `filePath`: The path to the Markdown file.
    *   `content`: The string content of the Markdown file.
    *   The function splits the content based on section headers (lines starting with one or more `#` characters).
    *   Each chunk is prefixed with a header indicating the file path and the label "Markdown Content".
    *   Chunks are created with a target size of approximately 10KB to manage processing load.
    *   Returns a promise that resolves to an array of strings, where each string represents a chunk of the parsed Markdown content.

*   **`generatePrompt(filePath: string, parsedContent: string): string`**: Constructs a prompt for a language model, instructing it to refine and improve the provided Markdown content.
    *   `filePath`: The path to the Markdown file.
    *   `parsedContent`: A string containing the parsed Markdown content.
    *   The prompt instructs the language model to act as a principal architect, focusing on clarity, coherence, and consistency with a "Container-First" platform vision. It emphasizes that the task is not summarization, but a comprehensive improvement of the original documentation.
    *   Returns a string containing the generated prompt.

*   **`postProcess(filePath: string, outputs: string[]): string`**:  Processes the outputs generated by the language model.
    *   `filePath`: The path to the Markdown file.
    *   `outputs`: An array of strings representing the outputs from the language model.
    *   The function combines the outputs into a single string, removing any leading or trailing code block markers (```markdown and ```).
    *   Returns a string containing the post-processed content.

**Usage**

You integrate this adapter into an agent system by implementing the `AgentAdapter` interface. The adapter will then handle the parsing, prompt generation, and post-processing of Markdown files as part of the agentâ€™s workflow. 

**Example**

```typescript
import { MarkdownAdapter } from './md-adapter.js';

const adapter = new MarkdownAdapter();
const filePath = 'example.md';
const markdownContent = '# Header 1\n\nThis is some content.';

adapter.parse(filePath, markdownContent)
  .then(chunks => {
    const prompt = adapter.generatePrompt(filePath, chunks[0]);
    // ... send prompt to language model ...
    const outputs = ['Improved content'];
    const processedContent = adapter.postProcess(filePath, outputs);
    console.log(processedContent);
  });