---
type: Documentation
domain: agent
origin: packages/tools/agent/src/adapters/terraform-adapter.ts
last_modified: 2026-01-31
generated: true
source: packages/tools/agent/src/adapters/terraform-adapter.ts
generated_at: 2026-01-31T10:18:51.706164
hash: 7c28ae755942fb80ed2efcfecf4b5ac58629d14bc12bba1935b1c59f82527957
---

## Terraform Adapter Documentation

**1. Introduction**

This document details the Terraform Adapter, a component designed to integrate Terraform configuration files into a larger operational system. It provides capabilities for identifying, parsing, and preparing Terraform code for analysis and documentation generation.

**2. Overview**

The Terraform Adapter functions as an agent within the system, responsible for handling files with the `.tf` extension. It extracts content, formats it, and prepares a prompt for a language model to generate documentation. This adapter streamlines the process of understanding and documenting Terraform infrastructure as code.

**3. Functionality**

The adapter provides four core functions:

*   **`canHandle(fileName: string): boolean`**: Determines if the adapter can process a given file based on its extension. It returns `true` if the file extension is `.tf`, and `false` otherwise.

*   **`parse(filePath: string, content: string): Promise<string[]>`**: Parses the Terraform configuration file content. It formats the file path and content into a structured string array. The output is designed for input into a language model.
    *   `filePath`: The path to the Terraform file.
    *   `content`: The content of the Terraform file.
    *   Returns: A promise resolving to an array of strings, each representing a formatted section of the parsed Terraform code. Example output:
        ```
        [
          "File: /path/to/your/file.tf\n\nTerraform HCL:\n\`\`\`hcl\nresource \"aws_instance\" \"example\" {\n  ami           = \"ami-0c55b2ab9919489a2\"\n  instance_type = \"t2.micro\"\n}\n\`\`\`"
        ]
        ```

*   **`generatePrompt(filePath: string, parsedContent: string): string`**: Constructs a prompt for a language model. This prompt instructs the model to act as a DevOps Engineer/Terraform Expert and generate documentation for the provided Terraform code.
    *   `filePath`: The path to the Terraform file.
    *   `parsedContent`: The parsed content of the Terraform file (output from the `parse` function).
    *   Returns: A string containing the prompt. Example:
        ```
        You are a DevOps Engineer / Terraform Expert.
        Generate documentation for the following Terraform infrastructure code.
        Identify resources, variables, outputs, and dependencies.

        File: /path/to/your/file.tf

        Terraform HCL:
        \`\`\`hcl
        resource "aws_instance" "example" {
          ami           = "ami-0c55b2ab9919489a2"
          instance_type = "t2.micro"
        }
        \`\`\`
        ```

*   **`postProcess(filePath: string, outputs: string[]): string`**: Combines the outputs from the language model into a single string, separated by double newlines.
    *   `filePath`: The path to the Terraform file.
    *   `outputs`: An array of strings representing the documentation generated by the language model.
    *   Returns: A single string containing the combined documentation.

**4. Usage**

You can integrate this adapter into a workflow by:

1.  Checking if a file can be handled using `canHandle()`.
2.  Parsing the file content using `parse()`.
3.  Generating a prompt using `generatePrompt()`.
4.  Sending the prompt to a language model.
5.  Post-processing the modelâ€™s outputs using `postProcess()`.

**5. Dependencies**

*   `path`: Node.js built-in module for file path manipulation.
*   `./interface.js`: Defines the `AgentAdapter` interface.

**6. Future Considerations**

Potential enhancements include:

*   More sophisticated parsing to identify specific Terraform components.
*   Support for multiple Terraform file formats (e.g., `.tfvars`).
*   Integration with Terraform state files for dependency analysis.